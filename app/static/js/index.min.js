function next(){var t=$(".active a").attr("id").slice(4),l=Number($(".page").text());$.ajax({type:"GET",url:"/category",data:{cat_id:t,page:(l+1).toString()},success:function(t){xmlDoc=$.parseXML(t),$xml=$(xmlDoc);var e=Number($xml.find("exp_num").text()),a=Number($xml.find("real_num").text())-l*e,i=$xml.find("next_num").text();$xml.find("prev_num").text();$(".page").text(l+1);for(var r=e;a<r;r--)$("#post"+r.toString()).hide();$("a.tn.float-left").replaceWith('<a class="tn btn-primary float-left" href="#row2" onclick="prev()">&larr; 上一页</a>'),"None"===i?$("a.float-right").replaceWith('<a class="float-right disabled" href="#row2" style="background-color: #e0dede;">没有更多..</a>'):$("a.float-right").replaceWith('<a class="tn btn-primary float-right" href="#row2" onclick="next()">下一页 →</a>');for(r=1;r<=a;r++)$article=$xml.find("[num={0}]".replace("{0}",r)),$title=$article.find("title"),$time=$article.find("time"),$url=$article.find("url"),$content=$article.find("content"),$cate=$article.find("cate"),$author=$article.find("author"),$post=$("#post"+r.toString()),$post.show(),$post.find(".post-title").text($title.text()),$post.find("a:first").attr("href",$url.text()),$post.find(".post-subtitle").text($content.text()),$post.find(".post-meta a").text($author.text()),$post.find(".cate").text($cate.text()),$post.find(".time").text(dayjs($time.text()).format("YYYY-MM-DD, HH:mm:ss"))}})}function prev(){var t=$(".active a").attr("id").slice(4),r=Number($(".page").text());$.ajax({type:"GET",url:"/category",data:{cat_id:t,page:(r-1).toString()},success:function(t){xmlDoc=$.parseXML(t),$xml=$(xmlDoc);var e=Number($xml.find("exp_num").text()),a=($xml.find("next_num").text(),$xml.find("prev_num").text());$(".page").text(r-1),0<$(".disabled").length&&$("a.float-right").replaceWith('<a class="tn btn-primary float-right" href="#row2" onclick="next()">下一页 →</a>'),"None"===a?$("a.tn.float-left").replaceWith('<a class="tn btn-primary float-left" href=""></a>'):$("a.tn.float-left").replaceWith('<a class="tn btn-primary test float-left" href="#row2" onclick="prev()">&larr; 上一页</a>');for(var i=1;i<=e;i++)$article=$xml.find("[num={0}]".replace("{0}",i)),$title=$article.find("title"),$time=$article.find("time"),$url=$article.find("url"),$content=$article.find("content"),$cate=$article.find("cate"),$author=$article.find("author"),$post=$("#post"+i.toString()),$post.show(),$post.find(".post-title").text($title.text()),$post.find("a:first").attr("href",$url.text()),$post.find(".post-subtitle").text($content.text()),$post.find(".post-meta a").text($author.text()),$post.find(".cate").text($cate.text()),$post.find(".time").text(dayjs($time.text()).format("YYYY-MM-DD, HH:mm:ss"))}})}$(".category a").click(function(){$(".active").removeClass("active"),$(this).parent().addClass("active");var t=$(this).attr("id");$.ajax({type:"GET",url:"/category",data:{cat_id:t.slice(4)},success:function(t){xmlDoc=$.parseXML(t),$xml=$(xmlDoc),$(".page").text(1);var e=Number($xml.find("exp_num").text()),a=Number($xml.find("real_num").text()),i=$xml.find("next_num").text(),r=$xml.find("prev_num").text();"None"===i?$("a.float-right").replaceWith('<a class="float-right" href="#row2" style="background-color: #e0dede;">没有更多..</a>'):$("a.float-right").replaceWith('<a class="tn btn-primary float-right" href="#row2" onclick="next()">下一页 →</a>'),"None"===r&&$("a.tn.float-left").replaceWith('<a class="tn btn-primary float-left" href=""></a>');for(var l=e;a<l;l--)$("#post"+l.toString()).hide();for(l=1;l<=a;l++)$article=$xml.find("[num={0}]".replace("{0}",l)),$title=$article.find("title"),$time=$article.find("time"),$url=$article.find("url"),$content=$article.find("content"),$cate=$article.find("cate"),$author=$article.find("author"),$post=$("#post"+l.toString()),$post.show(),$post.find(".post-title").text($title.text()),$post.find("a:first").attr("href",$url.text()),$post.find(".post-subtitle").text($content.text()),$post.find(".post-meta a").text($author.text()),$post.find(".cate").text($cate.text()),$post.find(".time").text(dayjs($time.text()).format("YYYY-MM-DD, HH:mm:ss"))},error:function(t){alert("The XML File could not be processed correctly.")}})}),$(document).scroll(function(){150<=$(this).scrollTop()&&($("#popUp").css("margin-left","-425px"),$("#plus").css("margin-left","0px"))}),$("#plus").click(function(){$("#popUp").css("margin-left","0px"),$("#plus").css("margin-left","-425px")}),$("#close").click(function(){$("#popUp").css("margin-left","-425px"),$("#plus").css("margin-left","0px")});